#@ load("@ytt:overlay", "overlay")

#! Downsize the resource requests for istio-pilot

#@overlay/match by=overlay.subset({ "kind": "Deployment", "metadata": { "name": "istio-pilot", "namespace": "istio-system" } }), missing_ok=True
---
spec:
  template:
    spec:
      containers:
        #@overlay/match by=overlay.subset({ "name": "discovery" })
        - resources:
            #@overlay/replace
            requests:
              cpu: 100m
              memory: 128Mi
