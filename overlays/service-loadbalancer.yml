#@ load("@ytt:overlay", "overlay")

#! templatize LoadBalancer services so that they may be used as NodePort services for
#! environments that do no support load balancers.

#@overlay/match by=overlay.subset({ "apiVersion": "v1", "kind": "Service", "spec": { "type": "LoadBalancer" } }), missing_ok=True
---
spec:
  #@overlay/replace
  type: "{{ .Values.global.k8s.service.type }}"
